var $jscomp={scope:{},owns:function(b,m){return Object.prototype.hasOwnProperty.call(b,m)}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(b,m,q){if(q.get||q.set)throw new TypeError("ES3 does not support getters and setters.");b!=Array.prototype&&b!=Object.prototype&&(b[m]=q.value)};$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(b,m,q,t){if(m){q=$jscomp.global;b=b.split(".");for(t=0;t<b.length-1;t++){var u=b[t];u in q||(q[u]={});q=q[u]}b=b[b.length-1];t=q[b];m=m(t);m!=t&&null!=m&&$jscomp.defineProperty(q,b,{configurable:!0,writable:!0,value:m})}};$jscomp.polyfill("Object.assign",function(b){return b?b:function(b,q){for(var m=1;m<arguments.length;m++){var u=arguments[m];if(u)for(var w in u)$jscomp.owns(u,w)&&(b[w]=u[w])}return b}},"es6-impl","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(b){return $jscomp.SYMBOL_PREFIX+(b||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var b=$jscomp.global.Symbol.iterator;b||(b=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[b]&&$jscomp.defineProperty(Array.prototype,b,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(b){var m=0;return $jscomp.iteratorPrototype(function(){return m<b.length?{done:!1,value:b[m++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(b){$jscomp.initSymbolIterator();b={next:b};b[$jscomp.global.Symbol.iterator]=function(){return this};return b};$jscomp.array=$jscomp.array||{};$jscomp.iteratorFromArray=function(b,m){$jscomp.initSymbolIterator();b instanceof String&&(b+="");var q=0,t={next:function(){if(q<b.length){var u=q++;return{value:m(u,b[u]),done:!1}}t.next=function(){return{done:!0,value:void 0}};return t.next()}};t[Symbol.iterator]=function(){return t};return t};
$jscomp.polyfill("Array.prototype.keys",function(b){return b?b:function(){return $jscomp.iteratorFromArray(this,function(b){return b})}},"es6-impl","es3");
(function(){function b(a,d,h){a={type:"call_service",domain:a,service:d};return h&&(a.service_data=h),a}function m(a){var d={type:"subscribe_events"};return a&&(d.event_type=a),d}function q(a){return a.result}function t(a,d){return new Promise(function(h,c){var e=null,g=a.subscribeEvents(function(a){var f=a.data;a=f.entity_id;(f=f.new_state)?(a=Object.assign({},e),a=(a[f.entity_id]=f,a)):(f=Object.assign({},e),a=(delete f[a],f));e=a;d(e)},"state_changed"),b=a.getStates().then(function(a){for(var f=
{},c=0;c<a.length;c++){var l=a[c];f[l.entity_id]=l}e=f;d(e)});Promise.all([g,b]).then(function(a){return h(a[0])},function(){return c()})})}function u(a){return a.substr(0,a.indexOf("."))}function w(a,d){var h={};return d.attributes.entity_id.forEach(function(c){(c=a[c])&&(h[c.entity_id]=c)}),h}function N(a){var d=[],h={};return Object.keys(a).forEach(function(c){var e=a[c];"group"===u(c)?d.push(e):h[c]=e}),d.sort(function(a,d){return a.attributes.order-d.attributes.order}),d.forEach(function(a){return a.attributes.entity_id.forEach(function(a){delete h[a]})}),
{groups:d,ungrouped:h}}function O(a,d,h){var c=document.createElement("div");c.className="mdl-list__item";var e=document.createElement("span");e.className="mdl-list__item-primary-content";var g=document.createTextNode("\n    ");e.appendChild(g);var b=document.createElement("span"),k=document.createTextNode(a.entity.attributes.friendly_name);b.appendChild(k);e.appendChild(b);c.appendChild(e);var f=document.createTextNode("\n  ");c.appendChild(f);var n=document.createElement("span");n.className="mdl-list__item-secondary-action";
var l=document.createComment("#if canSwitch(entity)");n.appendChild(l);var r=null,p=null;z.helpers.canSwitch(a.entity)?r=A(a,d,n,l):p=B(a,d,n,l);c.appendChild(n);h.appendChild(c);return{update:function(a,f){k.data=f.entity.attributes.friendly_name;z.helpers.canSwitch(f.entity)?(r?r.update(a,f):r=A(f,d,n,l),p&&(p.teardown(!0),p=null)):(r&&(r.teardown(!0),r=null),p?p.update(a,f):p=B(f,d,n,l));p&&p.update(a,f)},teardown:function(a){a&&c.parentNode.removeChild(c);g.parentNode.removeChild(g);f.parentNode.removeChild(f);
r&&r.teardown(a);p&&p.teardown(a)}}}function B(a,d,h,c){var e=document.createTextNode("\n      ");c.parentNode.insertBefore(e,c);var g=document.createTextNode(a.entity.state);c.parentNode.insertBefore(g,c);var b=document.createTextNode("\n    ");c.parentNode.insertBefore(b,c);return{update:function(a,f){g.data=f.entity.state},teardown:function(a){e.parentNode.removeChild(e);b.parentNode.removeChild(b)}}}function A(a,d,h,c){var e=document.createElement("input");e.setAttribute("data-entity_id",a.entity.entity_id);
e.type="checkbox";e.className="mdl-switch__input";e.checked="on"==a.entity.state;c.parentNode.insertBefore(e,c);return{update:function(a,c){e.setAttribute("data-entity_id",c.entity.entity_id);e.checked="on"==c.entity.state},teardown:function(a){a&&e.parentNode.removeChild(e)}}}function P(a){function d(a,c,l){for(var f in a)if(f in c){var d=c[f],n=l[f];if(d!==n||"object"===typeof d){var e=a[f];if(e)for(var b=0;b<e.length;b+=1){var g=e[b];g.__calling||(g.__calling=!0,g.call(h,d,n),g.__calling=!1)}}}}
var h=this,c=a.data||{},e=Object.create(null),g=Object.create(null),b=Object.create(null);this.fire=function(a,c){if(a=a in b&&b[a].slice())for(var f=0;f<a.length;f+=1)a[f].call(this,c)};this.get=function(a){return c[a]};this.set=function(a){var f=c;c=Object.assign({},f,a);d(e,a,f);k&&k.update(a,c);d(g,a,f)};this.observe=function(a,d,l){l=void 0===l?{}:l;var f=l.defer?g:e;(f[a]||(f[a]=[])).push(d);!1!==l.init&&(d.__calling=!0,d.call(h,c[a]),d.__calling=!1);return{cancel:function(){var c=f[a].indexOf(d);
~c&&f[a].splice(c,1)}}};this.on=function(a,c){var f=b[a]||(b[a]=[]);f.push(c);return{cancel:function(){var a=f.indexOf(c);~a&&f.splice(a,1)}}};this.teardown=function(a){this.fire("teardown");k.teardown(!1!==a);k=null;c={}};var k=O(c,this,a.target)}function C(a,d,b){if("entities"in d&&"object"===typeof a.entities||a.entities!==b.entities||"group"in d&&"object"===typeof a.group||a.group!==b.group)a.entList=d.entList=D.computed.entList(a.entities,a.group)}function Q(){var a=document.createElement("style");
a.textContent="       \n .mdl-card[svelte-1786261835], [svelte-1786261835] .mdl-card {\n  margin-right: 16px;\n  margin-bottom: 16px;\n }\n\n .mdl-card__title[svelte-1786261835], [svelte-1786261835] .mdl-card__title {\n  text-transform: capitalize;\n }\n\n .mdl-list[svelte-1786261835], [svelte-1786261835] .mdl-list {\n  padding: 0;\n }\n";document.head.appendChild(a);E=!0}function R(a,d,b){var c=document.createElement("div");c.setAttribute("svelte-1786261835","");c.className="mdl-card mdl-shadow--2dp";
var e=document.createElement("div");e.className="mdl-card__title";var g=document.createElement("h2");g.className="mdl-card__title-text";var h=document.createTextNode(a.group.attributes.friendly_name);g.appendChild(h);e.appendChild(g);c.appendChild(e);var k=document.createTextNode("\n  ");c.appendChild(k);e=document.createElement("div");e.className="mdl-card__supporting-text";g=document.createElement("div");g.className="mdl-list";var f=document.createComment("#each entList");g.appendChild(f);for(var n=
a.entList,l=document.createDocumentFragment(),r=[],p=0;p<n.length;p+=1)r[p]=F(a,n,n[p],p,d,l);f.parentNode.insertBefore(l,f);e.appendChild(g);c.appendChild(e);b.appendChild(c);return{update:function(a,c){h.data=c.group.attributes.friendly_name;for(var e=c.entList,b=0;b<e.length;b+=1)r[b]?r[b].update(a,c,e,e[b],b):r[b]=F(c,e,e[b],b,d,l);for(b=e.length;b<r.length;b+=1)r[b].teardown(!0);f.parentNode.insertBefore(l,f);r.length=e.length},teardown:function(a){a&&c.parentNode.removeChild(c);k.parentNode.removeChild(k);
for(var d=0;d<r.length;d+=1)r[d].teardown(a);a&&f.parentNode.removeChild(f)}}}function F(a,d,b,c,e,g){var h=document.createComment("#if entity.attributes.friendly_name");g.appendChild(h);var k=b.attributes.friendly_name?G(a,d,b,c,e,g,h):null;return{update:function(a,c,d,b,p){b=d[p];b.attributes.friendly_name?k?k.update(a,c,d,b,p):k=G(c,d,b,p,e,g,h):k&&(k.teardown(!0),k=null)},teardown:function(a){k&&k.teardown(a);a&&h.parentNode.removeChild(h)}}}function G(a,d,b,c,e,g,x){var h=new D.components.EntityRow({target:g,
parent:e,data:{entity:b}});return{update:function(a,c,d,b,e){c={};"entList"in a&&(c.entity=b);Object.keys(c).length&&h.set(c)},teardown:function(a){h.teardown(!0)}}}function S(a){function d(a,c,d){for(var f in a)if(f in c){var e=c[f],l=d[f];if(e!==l||"object"===typeof e){var g=a[f];if(g)for(var h=0;h<g.length;h+=1){var n=g[h];n.__calling||(n.__calling=!0,n.call(b,e,l),n.__calling=!1)}}}}var b=this,c=a.data||{};C(c,c,{});var e=Object.create(null),g=Object.create(null),x=Object.create(null);this.fire=
function(a,c){if(a=a in x&&x[a].slice())for(var f=0;f<a.length;f+=1)a[f].call(this,c)};this.get=function(a){return c[a]};this.set=function(a){var f=c;c=Object.assign({},f,a);C(c,a,f);d(e,a,f);k&&k.update(a,c);for(d(g,a,f);this.__renderHooks.length;)a=this.__renderHooks.pop(),a.fn.call(a.context)};this.observe=function(a,d,l){l=void 0===l?{}:l;var f=l.defer?g:e;(f[a]||(f[a]=[])).push(d);!1!==l.init&&(d.__calling=!0,d.call(b,c[a]),d.__calling=!1);return{cancel:function(){var c=f[a].indexOf(d);~c&&f[a].splice(c,
1)}}};this.on=function(a,c){var f=x[a]||(x[a]=[]);f.push(c);return{cancel:function(){var a=f.indexOf(c);~a&&f.splice(a,1)}}};this.teardown=function(a){this.fire("teardown");k.teardown(!1!==a);k=null;c={}};E||Q();this.__renderHooks=[];for(var k=R(c,this,a.target);this.__renderHooks.length;)a=this.__renderHooks.pop(),a.fn.call(a.context)}function H(a,d,b){if("entities"in d&&"object"===typeof a.entities||a.entities!==b.entities)a.groups=d.groups=y.computed.groups(a.entities)}function T(){var a=document.createElement("style");
a.textContent="       \n  .cards[svelte-199336295], [svelte-199336295] .cards {\n    display: flex;\n    flex-wrap: wrap;\n    padding-top: 16px;\n    padding-left: 16px;\n  }\n";document.head.appendChild(a);I=!0}function U(a,d,b){function c(a){d.handleChange(a)}var e=document.createElement("div");e.setAttribute("svelte-199336295","");e.className="cards";e.addEventListener("change",c,!1);var g=document.createComment("#each groups");e.appendChild(g);for(var h=a.groups,k=document.createDocumentFragment(),
f=[],n=0;n<h.length;n+=1)f[n]=J(a,h,h[n],n,d,k);g.parentNode.insertBefore(k,g);b.appendChild(e);return{update:function(a,c){for(var b=c.groups,e=0;e<b.length;e+=1)f[e]?f[e].update(a,c,b,b[e],e):f[e]=J(c,b,b[e],e,d,k);for(e=b.length;e<f.length;e+=1)f[e].teardown(!0);g.parentNode.insertBefore(k,g);f.length=b.length},teardown:function(a){e.removeEventListener("change",c,!1);a&&e.parentNode.removeChild(e);for(var b=0;b<f.length;b+=1)f[b].teardown(a);a&&g.parentNode.removeChild(g)}}}function J(a,b,h,c,
e,g){var d=document.createComment("#if !group.attributes.hidden");g.appendChild(d);var k=h.attributes.hidden?null:K(a,b,h,c,e,g,d);return{update:function(a,c,b,h,p){h=b[p];h.attributes.hidden?k&&(k.teardown(!0),k=null):k?k.update(a,c,b,h,p):k=K(c,b,h,p,e,g,d)},teardown:function(a){k&&k.teardown(a);a&&d.parentNode.removeChild(d)}}}function K(a,b,h,c,e,g,m){var d=new y.components.GroupCard({target:g,parent:e,data:{entities:a.entities,group:h}});return{update:function(a,c,b,e,h){b={};"entities"in a&&
(b.entities=c.entities);"groups"in a&&(b.group=e);Object.keys(b).length&&d.set(b)},teardown:function(a){d.teardown(!0)}}}function L(a){function b(a,c,b){for(var f in a)if(f in c){var d=c[f],e=b[f];if(d!==e||"object"===typeof d){var g=a[f];if(g)for(var k=0;k<g.length;k+=1){var l=g[k];l.__calling||(l.__calling=!0,l.call(h,d,e),l.__calling=!1)}}}}var h=this,c=Object.assign(y.data(),a.data);H(c,c,{});var e=Object.create(null),g=Object.create(null),m=Object.create(null);this.fire=function(a,c){if(a=a in
m&&m[a].slice())for(var b=0;b<a.length;b+=1)a[b].call(this,c)};this.get=function(a){return c[a]};this.set=function(a){var d=c;c=Object.assign({},d,a);H(c,a,d);b(e,a,d);k&&k.update(a,c);for(b(g,a,d);this.__renderHooks.length;)a=this.__renderHooks.pop(),a.fn.call(a.context)};this.observe=function(a,b,d){d=void 0===d?{}:d;var f=d.defer?g:e;(f[a]||(f[a]=[])).push(b);!1!==d.init&&(b.__calling=!0,b.call(h,c[a]),b.__calling=!1);return{cancel:function(){var c=f[a].indexOf(b);~c&&f[a].splice(c,1)}}};this.on=
function(a,b){var c=m[a]||(m[a]=[]);c.push(b);return{cancel:function(){var a=c.indexOf(b);~a&&c.splice(a,1)}}};this.teardown=function(a){this.fire("teardown");k.teardown(!1!==a);k=null;c={}};I||T();this.__renderHooks=[];for(var k=U(c,this,a.target);this.__renderHooks.length;)a=this.__renderHooks.pop(),a.fn.call(a.context)}var v=function(a,b){this.url=a;this.options=b||{};this.commandId=1;this.commands={};this.connectionTries=0;this.eventListeners={};this.closeRequested=!1};v.prototype.addEventListener=
function(a,b){var d=this.eventListeners[a];d||(d=this.eventListeners[a]=[]);d.push(b)};v.prototype.fireEvent=function(a){var b=this;(this.eventListeners[a]||[]).forEach(function(a){return a(b)})};v.prototype.connect=function(){var a=this;return new Promise(function(b,h){var c=a.commands;Object.keys(c).forEach(function(a){a=c[a];a.reject&&a.reject({type:"result",success:!1,error:{code:3,message:"Connection lost"}})});var d=!1;a.connectionTries+=1;a.socket=new WebSocket(a.url);a.socket.addEventListener("open",
function(){a.connectionTries=0});a.socket.addEventListener("message",function(e){e=JSON.parse(e.data);switch(e.type){case "event":a.commands[e.id].eventCallback(e.event);break;case "result":e.success?a.commands[e.id].resolve(e):a.commands[e.id].reject(e.error);delete a.commands[e.id];break;case "auth_required":a.sendMessage({type:"auth",api_password:a.options.authToken});break;case "auth_invalid":h(2);d=!0;break;case "auth_ok":b(a),a.fireEvent("ready"),a.commandId=1,a.commands={},Object.keys(c).forEach(function(b){var d=
c[b];d.eventType&&a.subscribeEvents(d.eventCallback,d.eventType).then(function(a){d.unsubscribe=a})})}});a.socket.addEventListener("close",function(){d||a.closeRequested||(0===a.connectionTries?a.fireEvent("disconnected"):h(1),setTimeout(function(){return a.connect()},1E3*Math.min(a.connectionTries,5)))})})};v.prototype.close=function(){this.closeRequested=!0;this.socket.close()};v.prototype.getStates=function(){return this.sendMessagePromise({type:"get_states"}).then(q)};v.prototype.getServices=
function(){return this.sendMessagePromise({type:"get_services"}).then(q)};v.prototype.getPanels=function(){return this.sendMessagePromise({type:"get_panels"}).then(q)};v.prototype.getConfig=function(){return this.sendMessagePromise({type:"get_config"}).then(q)};v.prototype.callService=function(a,d,h){return this.sendMessagePromise(b(a,d,h))};v.prototype.subscribeEvents=function(a,b){var d=this;return this.sendMessagePromise(m(b)).then(function(c){var e={eventCallback:a,eventType:b,unsubscribe:function(){return d.sendMessagePromise({type:"unsubscribe_events",
subscription:c.id}).then(function(){delete d.commands[c.id]})}};return d.commands[c.id]=e,function(){return e.unsubscribe()}})};v.prototype.ping=function(){return this.sendMessagePromise({type:"ping"})};v.prototype.sendMessage=function(a){this.socket.send(JSON.stringify(a))};v.prototype.sendMessagePromise=function(a){var b=this;return new Promise(function(d,c){b.commandId+=1;var e=b.commandId;a.id=e;b.commands[e]={resolve:d,reject:c};b.sendMessage(a)})};var z=function(){var a=["light","switch"];return{helpers:{canSwitch:function(b){return-1!==
a.indexOf(u(b.entity_id))}}}}(),D=function(){return{computed:{entList:function(a,b){var d=w(a,b);return Object.keys(d).map(function(a){return d[a]})}},components:{EntityRow:P}}}(),E=!1,y=function(){return{methods:{handleChange:function(a){var b=a.target;a=b.dataset.entity_id;b=b.checked?"turn_on":"turn_off";this.get("conn").callService("homeassistant",b,{entity_id:a})}},data:function(){return{entities:{}}},computed:{groups:function(a){return N(a).groups}},components:{GroupCard:S}}}(),I=!1;L.prototype=
y.methods;var M=new L({target:document.querySelector(".page-content"),data:{entities:{}}});(new v("ws://localhost:8123/api/websocket",void 0)).connect().then(function(a){M.set({conn:a});t(a,function(a){console.log(a);M.set({entities:a})})})})();
